<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- 1. Ubicación para productos devueltos (punto de entrada) -->
        <record id="stock_location_returns" model="stock.location">
            <field name="name">Devoluciones</field>
            <!-- La hacemos hija de la ubicación virtual para mantenerla separada -->
            <field name="location_id" ref="stock.stock_location_locations_virtual"/>
            <field name="usage">internal</field>
            <field name="comment">Punto de entrada para todos los productos devueltos pendientes de clasificación.</field>
        </record>

        <!-- 2. Ubicación para productos en "Garantía / Revisión" -->
        <record id="stock_location_warranty" model="stock.location">
            <field name="name">Garantía</field>
            <!-- También hija de la ubicación principal para mantener el orden -->
            <field name="location_id" ref="stock.stock_location_stock"/>
            <field name="usage">internal</field>
            <field name="comment">Ubicación para productos devueltos que requieren inspección o reparación.</field>
        </record>

        <!-- 3. Tipo de Operación para MOVIMIENTOS INTERNOS de clasificación de devoluciones -->
        <record id="picking_type_returns_classification" model="stock.picking.type">
            <field name="name">Clasificación de Devoluciones</field>
            <!-- ¡CAMBIO IMPORTANTE! Ahora es un movimiento interno -->
            <field name="code">internal</field>
            <field name="warehouse_id" ref="stock.warehouse0"/>
            <field name="use_create_lots">False</field>
            <field name="use_existing_lots">True</field>
            <!-- Origen: Devoluciones -->
            <field name="default_location_src_id" ref="stock_location_returns"/>
            <!-- Destino por defecto: Stock principal -->
            <field name="default_location_dest_id" ref="stock.stock_location_stock"/>
            <field name="sequence_code">CLSDEV</field>
        </record>
    </data>
</odoo>